syntax = "proto3";

option csharp_namespace = "ProviderData.Protos";
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

package products;

service ProductService {
  rpc GetAll (google.protobuf.Empty) returns (ProductList);
  rpc GetById (ProductIdRequest) returns (ProductResponse);
  rpc Create (ProductRequest) returns (ProductResponse);
  rpc Update (ProductRequest) returns (ProductResponse);
  rpc Delete (ProductIdRequest) returns (google.protobuf.Empty);

  rpc CreateOrder (OrderRequest) returns (OrderResponse);
  rpc GetOrderById (OrderIdRequest) returns (OrderResponse);
}

//////////////////////////
// PRODUCTOS
//////////////////////////

message ProductIdRequest {
  int32 id = 1;
}

message ProductRequest {
  int32 id = 1;
  string nombre = 2;
  int32 precio = 3;
  string imagen = 4;
  string descripcion = 5;
  string categoria = 6;
  int32 stock = 7;
}

message ProductResponse {
  int32 id = 1;
  string nombre = 2;
  int32 precio = 3;
  string imagen = 4;
  string descripcion = 5;
  string categoria = 6;
  int32 stock = 7;
}

message ProductList {
  repeated ProductResponse products = 1;
}

//////////////////////////
// ÓRDENES
//////////////////////////

message OrderRequest {
  int32 product_id = 1;
  string buyer_email = 2;
  int32 quantity = 3;
}

message OrderIdRequest {
  int32 id = 1;
}

message OrderResponse {
  int32 id = 1;
  int32 product_id = 2;
  string buyer_email = 3;
  int32 quantity = 4;
  string status = 5;

  // Fecha de creación
  google.protobuf.Timestamp order_date = 6;
}
