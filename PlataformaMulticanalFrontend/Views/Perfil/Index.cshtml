@{
    ViewData["Title"] = "Mi Perfil";
}

@section Styles {
    <link rel="stylesheet" href="~/css/perfil.css" asp-append-version="true" />
}

<!-- Breadcrumb -->
<div class="breadcrumb-section">
    <div class="container-fluid px-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Inicio</a></li>
                <li class="breadcrumb-item active">Mi Perfil</li>
            </ol>
        </nav>
    </div>
</div>

<!-- Profile Section -->
<section class="profile-section">
    <div class="container-fluid px-4">
        <div class="row">
            <!-- Sidebar Menu -->
            <div class="col-lg-3 mb-4">
                <div class="profile-sidebar">
                    <div class="profile-avatar-section">
                        <div class="profile-avatar">
                            <img src="https://ui-avatars.com/api/?name=Juan+Perez&size=120&background=2563eb&color=fff" alt="Avatar">
                            <button class="btn-edit-avatar">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <h4>Juan Pérez</h4>
                        <p>juan.perez@email.com</p>
                        <span class="member-badge">
                            <i class="fas fa-star me-1"></i>Miembro Premium
                        </span>
                    </div>

                    <nav class="profile-menu">
                        <a href="#" class="menu-item active">
                            <i class="fas fa-user"></i>
                            <span>Información Personal</span>
                        </a>
                        <a asp-controller="Perfil" asp-action="Historial" class="menu-item">
                            <i class="fas fa-box"></i>
                            <span>Mis Pedidos</span>
                            <span class="badge bg-primary">3</span>
                        </a>
                        <a href="#" class="menu-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Direcciones</span>
                        </a>
                        <a href="#" class="menu-item">
                            <i class="fas fa-credit-card"></i>
                            <span>Métodos de Pago</span>
                        </a>
                        <a href="#" class="menu-item">
                            <i class="fas fa-heart"></i>
                            <span>Lista de Deseos</span>
                        </a>
                        <a href="#" class="menu-item">
                            <i class="fas fa-bell"></i>
                            <span>Notificaciones</span>
                        </a>
                        <a href="#" class="menu-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Seguridad</span>
                        </a>
                        <a href="#" class="menu-item text-danger">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Cerrar Sesión</span>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9">
                <!-- Profile Stats -->
                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-icon bg-primary">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="stat-info">
                            <h3>24</h3>
                            <p>Compras Totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-success">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-info">
                            <h3>$8,450</h3>
                            <p>Total Gastado</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-warning">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-info">
                            <h3>250</h3>
                            <p>Puntos de Recompensa</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon bg-danger">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-info">
                            <h3>12</h3>
                            <p>Favoritos</p>
                        </div>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="profile-card">
                    <div class="card-header">
                        <h4><i class="fas fa-user me-2"></i>Información Personal</h4>
                        <button class="btn btn-outline-primary btn-sm" onclick="toggleEdit()">
                            <i class="fas fa-edit me-2"></i>Editar
                        </button>
                    </div>
                    <div class="card-body">
                        <form id="profileForm">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">Nombre *</label>
                                    <input type="text" class="form-control" value="Juan" disabled id="firstName">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Apellido *</label>
                                    <input type="text" class="form-control" value="Pérez" disabled id="lastName">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Correo Electrónico *</label>
                                    <input type="email" class="form-control" value="juan.perez@email.com" disabled>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Teléfono *</label>
                                    <input type="tel" class="form-control" value="+57 300 123 4567" disabled id="phone">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Documento de Identidad</label>
                                    <input type="text" class="form-control" value="1234567890" disabled id="document">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Fecha de Nacimiento</label>
                                    <input type="date" class="form-control" value="1990-05-15" disabled id="birthdate">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Género</label>
                                    <select class="form-select" disabled id="gender">
                                        <option value="M" selected>Masculino</option>
                                        <option value="F">Femenino</option>
                                        <option value="O">Otro</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">País</label>
                                    <select class="form-select" disabled id="country">
                                        <option value="CO" selected>Colombia</option>
                                        <option value="MX">México</option>
                                        <option value="AR">Argentina</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-actions" id="formActions" style="display: none;">
                                <button type="button" class="btn btn-success" onclick="saveProfile()">
                                    <i class="fas fa-save me-2"></i>Guardar Cambios
                                </button>
                                <button type="button" class="btn btn-outline-secondary" onclick="cancelEdit()">
                                    Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Addresses -->
                <div class="profile-card">
                    <div class="card-header">
                        <h4><i class="fas fa-map-marker-alt me-2"></i>Direcciones Guardadas</h4>
                        <button class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-plus me-2"></i>Agregar Nueva
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="address-list">
                            <div class="address-item">
                                <div class="address-badge">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="address-info">
                                    <div class="address-header">
                                        <h5>Casa</h5>
                                        <span class="badge bg-primary">Principal</span>
                                    </div>
                                    <p>Calle 123 #45-67, Apt 101</p>
                                    <p>Bogotá, Bogotá D.C., 110111</p>
                                    <p>+57 300 123 4567</p>
                                </div>
                                <div class="address-actions">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="address-item">
                                <div class="address-badge">
                                    <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="address-info">
                                    <div class="address-header">
                                        <h5>Oficina</h5>
                                    </div>
                                    <p>Carrera 7 #71-21, Torre B, Piso 5</p>
                                    <p>Bogotá, Bogotá D.C., 110231</p>
                                    <p>+57 300 123 4567</p>
                                </div>
                                <div class="address-actions">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Methods -->
                <div class="profile-card">
                    <div class="card-header">
                        <h4><i class="fas fa-credit-card me-2"></i>Métodos de Pago</h4>
                        <button class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-plus me-2"></i>Agregar Nuevo
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="payment-methods-list">
                            <div class="payment-method-item">
                                <div class="payment-icon">
                                    <i class="fab fa-cc-visa"></i>
                                </div>
                                <div class="payment-info">
                                    <h5>Visa terminada en 4242</h5>
                                    <p>Vence 12/25</p>
                                    <span class="badge bg-primary">Predeterminada</span>
                                </div>
                                <div class="payment-actions">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="payment-method-item">
                                <div class="payment-icon">
                                    <i class="fab fa-cc-mastercard"></i>
                                </div>
                                <div class="payment-info">
                                    <h5>Mastercard terminada en 8888</h5>
                                    <p>Vence 06/26</p>
                                </div>
                                <div class="payment-actions">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        function toggleEdit() {
            const inputs = document.querySelectorAll('#profileForm input, #profileForm select');
            const actions = document.getElementById('formActions');
            
            inputs.forEach(input => {
                if (input.type !== 'email') {
                    input.disabled = false;
                }
            });
            
            actions.style.display = 'flex';
        }

        function cancelEdit() {
            const inputs = document.querySelectorAll('#profileForm input, #profileForm select');
            const actions = document.getElementById('formActions');
            
            inputs.forEach(input => input.disabled = true);
            actions.style.display = 'none';
        }

        function saveProfile() {
            alert('Perfil actualizado exitosamente');
            cancelEdit();
        }
    </script>
}